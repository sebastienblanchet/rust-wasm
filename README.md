# rust-wasm

**Sebastien Blanchet**

Follow example in [Book](https://rustwasm.github.io/book/)

## Requirements:

Rust [as per](https://www.rust-lang.org/tools/install):
* `rustup`
* `rustc`
* `cargo`
* `cargo-generate`

Web assembly [as per](https://rustwasm.github.io/wasm-pack/installer/)
* `wasm`

Node [as per](https://www.npmjs.com/get-npm)
* `npm`

## Build

Once in the your `$/rust-wasm`:

```bash
λ cd wasm-game-of-life
λ wasm-pack build
```

This will create a `$/rust-wasm/wasm-game-of-life/pkg`. To put this in a webpage using [create-wasm-app](https://github.com/rustwasm/create-wasm-app):
``` bash
λ npm init wasm-app www
```

This will generate the contents in `$/rust-wasm/wasm-game-of-life/www`, from current workding directory:
```bash
λ cd www
λ npm install
λ npm run start
```

The project is now running at [localhost:8080](http://localhost:8080/).

## Adding New Dependency

To add a new `wasm-pack` pkg, go to [www/package.json](wasm-game-of-life/www/package.json) and add the following:

```json
  "dependencies": {
    // ...
    "dependencyName": "file:../file/path/to/pkg",
    // ...
  }
```

## Conway's Game of Life

Implement From [wikipedia](https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life):

> The universe of the Game of Life is an infinite, 2D orthogonal grid of square cells, each of which is
> in one of two possible states, alive || dead (populated || unpopulated, respectively). Every cell interacts 
> with its eight neighbours, which are the cells that are horizontally, vertically, or diagonally adjacent. At each 
> step in time, the following transitions occur:
> 
>     Any live cell with fewer than two live neighbours dies, as if by underpopulation.
>     Any live cell with two or three live neighbours lives on to the next generation.
>     Any live cell with more than three live neighbours dies, as if by overpopulation.
>     Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.
>
> These rules, which compare the behavior of the automaton to real life, can be condensed into the following:
> 
>     Any live cell with two or three neighbors survives.
>     Any dead cell with three live neighbors becomes a live cell.
>     All other live cells die in the next generation. Similarly, all other dead cells stay dead.
>
> The initial pattern constitutes the seed of the system. The first generation is created by applying the above rules 
> simultaneously to every cell in the seed; births and deaths occur simultaneously, and the discrete moment at which 
> this happens is sometimes called a tick. Each generation is a pure function of the preceding one. The rules 
> continue to be applied repeatedly to create further generations.
>


## Contents:

In your repository `$/rust-wasm/wasm-game-of-life`, listed below are the relevant files:

``` bash
├── Cargo.toml # project dependencies
├── pkg # generated from wasm-pack
│   ├── package.json # generated metadata for JavaScript & WebAssembly
│   ├── wasm_game_of_life.d.ts # declarations for JavaScript glue
│   ├── wasm_game_of_life.js # JavaScript glue for importing DOM and JavaScript into Rust
│   └── wasm_game_of_life_bg.wasm # WebAssembly binary generated by compiler from ../src/
├── src
│   ├── lib.rs # wasm-bindgen to interface with JavaScript
│   └── utils.rs # common utils to work with compile WebAssembly
├── tests
│   └── web.rs # generic unit / integration tests
└── www # generated from create-wasm-app
    ├── bootstrap.js # wrapper for index.js
    ├── index.html # root html, loads bootstrap
    ├── index.js # main entry point for Javacript
    ├── package.json # pre configured webpack dependencies
    └── webpack.config.js # pre configured local dev server
```